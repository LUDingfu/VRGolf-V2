# Class `RandomCounts`

**Purpose**: Used to generate the `countList` (count value for each error type) and generate `mediumList` for random feedback group.

### Instance Fields:
- **countA**~**countF**: Each represents one type of error.

### Methods:
- **`GenerateCounts()`**: Randomly generates counts for each error type that satisfies each error type occurs at least once, and the sum of them is 30.
- **`ShuffleIntList(List<int> list)`**: Shuffles the int list elements randomly.
- **`ShuffleVector2List(List<Vector2> list)`**: Shuffles the Vector2 list elements randomly.
- **`GenerateMediumList(List<int> shuffledErrorList)`**: Based on `shuffledErrorList`, generates a list consisting of 90 elements, each representing a trial with value either 0 or 1. `0` means in this trial the ball goes into the hole, `1` means it is the error trial.

---

# Class `FinalListGenerator`

**Purpose**: Generates the final list based on the feedback group.

### Instance Fields:
- **random**: A random instance.
- **errorList**: The list of 15 elements that represent the number of errors in each block (order is not important).
- **errorListShuffled**: Shuffled elements in `errorList`. Used for the random feedback group.
- **mediumList**: Used for the random feedback group. Generated by `RandomCounts.GenerateMediumList(List<int> shuffledErrorList)`.
- **finalList**: The final list that contains the vector coordinates of every trial based on the feedback group.
- **holeTransformation**: The transformation of the hole.
- **finalAdaptiveList**
- **gridSize**: The size of the grid.

### Methods:
- **`Awake()`**: 
  1. Set the hole transformation.
  2. Get the feedback group entered.
  3. Get the final list based on the feedback group.
- **`GetFinalListBasedOnFeedbackGroup(int feedbackGroup)`**: Generates final list based on feedback group (`1` for perfect feedback group, `2` for random feedback group, `3` for adaptive feedback group). For the random feedback group, first generate the `countList`, then based on `errorList`, shuffle it and generate `mediumList`, and then generate the final list based on `mediumList`.
- **`GeneratePerfectFeedbackList()`**: Returns a list of 90 Vector2 coordinate elements, all are positions of the hole.
- **`GenerateRandomFeedbackList(List<int> mediumList, List<int> countList)`**: Based on the `mediumList`, replace every `0` with the hole transformation, meaning go into the hole, and replace `1` with one error type, which was randomly chosen from the `countList`.
- **`SelectRandomNonZeroCount(List<int> countList)`**: Helper method for `GenerateRandomFeedbackList`, aiming to select one error from `countList` randomly. The `countList` will eventually become `[0, 0, 0, 0, 0, 0]`, meaning all the error types are selected.
- **`GenerateAdaptiveFeedbackList(List<int> errorList)`**: The `errorList` defines the number of errors in each block. Initially, an MRE is defined for the first block manually, which is very large. Then in each subsequent block, the MRE decreases continuously.
- **`CalculateMRE(List<Vector2> coordinateList)`**: Helper method for `GenerateAdaptiveFeedbackList`. Calculates the MRE in a block. It should be the sum of errors/number of elements in the `errorList` (number of errors) + number of successful trials (error of successful trial is 0).
- **`GenerateErrorsInOneBlock(int numberOfErrorsThisBlock)`**: Generates the error list in one block. Randomly generates a specific number of errors in one block.
- **`GetA()`**: Randomly gets a Vector2 coordinate in the area of error type A.
- **`GetB()`**: Randomly gets a Vector2 coordinate in the area of error type B.
- **`GetC()`**: Randomly gets a Vector2 coordinate in the area of error type C.
- **`GetD()`**: Randomly gets a Vector2 coordinate in the area of error type D.
- **`GetE()`**: Randomly gets a Vector2 coordinate in the area of error type E.
- **`GetF()`**: Randomly gets a Vector2 coordinate in the area of error type F.

---

# Class `GolfBallController`

**Purpose**: Controls the movement of the golf ball.

### Instance Fields:
- **speedFactor**: The initial speed.
- **gravity**: Controls the speed at which the ball falls.
- **finalListGenerator**: Reference to the `FinalListGenerator`.
- **dataSaver**: Reference to the `DataSaver`.
- **ballRenderer**: The ball renderer.
- **feedbackGroup**: The place for inputting the feedback group.
- **hasFallen**: Shows the status of the golf ball: fallen or not.
- **floorHeight**
- **rigidbody**: The rigidbody instance.
- **hasFired**: Indicates whether to fire the movement or not.
- **targetDirectionNormalized**: Makes the target direction normalized.
- **collider**
- **startPosition**: Position of the golf ball.
- **targetPosition**: Target position in one trial.
- **currentIndex**: Index for the current trial (we use the final list to record every trial).
- **holeDetectionTrigger**: Indicates whether hole detection is triggered or not.
- **actualSpeed**: `{ get; set; }`

### Methods:
- **`Start()`**: Initializes some instance values.
- **`Update()`**: Calls `MoveBall` function to fire the ball.
- **`Reset()`**: After clicking the re-fire button, resets the golf ball to the original place.
- **`PrepareNextTrial()`**: Prepares for the next trial, which gets the next elements in the final list.
- **`Fall(bool state)`**: Triggers the related falling parameters.
- **`MoveBall()`**: Moves the ball towards the target position.
- **`GetTargetPosition()`**: Gets the target position from the final list.
- **`SetActualSpeed(Vector3 targetDirectionNormalized, float directionVectorMagnitude, float speedFactor)`**: Sets the actual speed. The initial speed is the speed factor, and it decreases as it moves closer to the hole.

---

# Class `HoleDetection`

**Purpose**: Detects whether the golf ball goes through the hole and controls the falling of the ball.

### Instance Field:
- **timeToDrop**: The parameter used to control the time the ball falls into the hole. Change this parameter to make the ball fall exactly into the hole.

### Methods:
- **`OnTriggerEnter(Collider other)`**: Detects the golf ball; when it is on the hole, calls the `WaitForBallToStop` function.
- **`WaitForBallToStop(GolfBallController ball)`**: Waits for a short time (`timeToDrop`) and then triggers the fall.

---

# Class `DataToSave`

### Instance Fields:
- **Data**: The data, three kinds of data:
  - Data to save before the trial.
  - Data to save after the trial (gaming data).
  - Just keep the column but leave it blank (will fill it after the experiment).

---

# Class `DataSaver`

**Purpose**: Connects Unity and Firebase. Can save data from Unity to Firebase and load data from Firebase to Unity.

### Instance Fields:
- **dataToSave**: The data to save.
- **Id**: The primary key for retrieving all the information of one participant.
- **dbRef**: Reference for the database.
- **golfBallController**: Reference for the golf ball controller (can add other references to make reference to other game objects).

### Methods:
- **`Awake()`**: Initializes the database reference.
- **`SaveDataFn()`**: Saves data for each participant under the participant's id.
- **`LoadDataFn()`**: Calls the function `LoadDataEnum()` to load the data.
- **`LoadDataEnum()`**: Loads the participant's data based on the id. When inputting the id and clicking `LoadData`, all data of the participant will be loaded.

---

# Namespace `Editor`

**Purpose**: The place for setting the re-fire button to reset the movement.
